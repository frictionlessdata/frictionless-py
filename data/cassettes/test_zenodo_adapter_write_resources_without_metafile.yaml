interactions:
- request:
    body: '{}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate, zstd
      Connection:
      - keep-alive
      Content-Length:
      - '2'
      Content-Type:
      - application/json
      User-Agent:
      - python-requests/2.32.4
    method: POST
    uri: https://sandbox.zenodo.org/api//deposit/depositions
  response:
    body:
      string: '{"created": "2025-07-26T12:01:26.604967+00:00", "modified": "2025-07-26T12:01:26.659759+00:00",
        "id": 298295, "conceptrecid": "298294", "metadata": {"access_right": "open",
        "prereserve_doi": {"doi": "10.5281/zenodo.298295", "recid": 298295}}, "title":
        "", "links": {"self": "https://sandbox.zenodo.org/api/deposit/depositions/298295",
        "html": "https://sandbox.zenodo.org/deposit/298295", "badge": "https://sandbox.zenodo.org/badge/doi/.svg",
        "files": "https://sandbox.zenodo.org/api/deposit/depositions/298295/files",
        "bucket": "https://sandbox.zenodo.org/api/files/f0e25dc6-faec-4086-83a1-257650a72542",
        "latest_draft": "https://sandbox.zenodo.org/api/deposit/depositions/298295",
        "latest_draft_html": "https://sandbox.zenodo.org/deposit/298295", "publish":
        "https://sandbox.zenodo.org/api/deposit/depositions/298295/actions/publish",
        "edit": "https://sandbox.zenodo.org/api/deposit/depositions/298295/actions/edit",
        "discard": "https://sandbox.zenodo.org/api/deposit/depositions/298295/actions/discard",
        "newversion": "https://sandbox.zenodo.org/api/deposit/depositions/298295/actions/newversion"},
        "record_id": 298295, "owner": 43920, "files": [], "state": "unsubmitted",
        "submitted": false}'
    headers:
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Content-Type, ETag, Link, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset
      content-length:
      - '1194'
      content-security-policy:
      - 'default-src ''self'' fonts.googleapis.com *.gstatic.com data: ''unsafe-inline''
        ''unsafe-eval'' blob: zenodo-broker.web.cern.ch zenodo-broker-qa.web.cern.ch
        maxcdn.bootstrapcdn.com cdnjs.cloudflare.com ajax.googleapis.com webanalytics.web.cern.ch'
      content-type:
      - application/json
      date:
      - Sat, 26 Jul 2025 12:01:26 GMT
      etag:
      - '"4"'
      permissions-policy:
      - interest-cohort=()
      referrer-policy:
      - strict-origin-when-cross-origin
      retry-after:
      - '45'
      server:
      - nginx
      set-cookie:
      - csrftoken=eyJhbGciOiJIUzUxMiIsImlhdCI6MTc1MzUzMTI4NiwiZXhwIjoxNzUzNjE3Njg2fQ.IjRvTkJhZ2c5NXFWSDZaUndQTlVUcm1kZHJhUVVEc0R2Ig.eUWYbZ9eKmvqXHuZs0PyBt8nB9wzvCozIbqk9CzoL1kgCYcWU6-uWDSQCA6MS1PaeVhT4VeqT63hd3wkE3mhPA;
        Expires=Sat, 02 Aug 2025 12:01:26 GMT; Max-Age=604800; Secure; Path=/; SameSite=Lax
      - 04f20c86f07421a9ec0f9d5ba4be544f=4e9e05744db2c0ebb5576f2c8df91de5; path=/;
        HttpOnly; Secure; SameSite=None
      strict-transport-security:
      - max-age=31556926; includeSubDomains
      - max-age=15768000
      x-content-type-options:
      - nosniff
      x-frame-options:
      - sameorigin
      x-ratelimit-limit:
      - '1000'
      x-ratelimit-remaining:
      - '952'
      x-ratelimit-reset:
      - '1753531332'
      x-request-id:
      - ea6b98c3585e89bc88a6b12fb03dd3df
      x-xss-protection:
      - 1; mode=block
    status:
      code: 201
      message: CREATED
- request:
    body: "{\n  \"metadata\": {\n    \"title\": \"Test Package With Meta\",\n    \"description\":
      \"This is a test package to test zenodo write function\",\n    \"publication_date\":
      \"2025-07-26\",\n    \"license\": \"CC-BY-4.0\",\n    \"upload_type\": \"dataset\",\n
      \   \"access_right\": \"open\",\n    \"creators\": [\n      {\n        \"name\":
      \"Test FD\",\n        \"affiliation\": \"OKFN\"\n      }\n    ]\n  }\n}"
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate, zstd
      Connection:
      - keep-alive
      Content-Length:
      - '358'
      Content-Type:
      - application/json
      User-Agent:
      - python-requests/2.32.4
    method: PUT
    uri: https://sandbox.zenodo.org/api//deposit/depositions/298295
  response:
    body:
      string: '{"created": "2025-07-26T12:01:26.604967+00:00", "modified": "2025-07-26T12:01:27.082502+00:00",
        "id": 298295, "conceptrecid": "298294", "metadata": {"title": "Test Package
        With Meta", "publication_date": "2025-07-26", "description": "This is a test
        package to test zenodo write function", "access_right": "open", "creators":
        [{"name": "Test FD", "affiliation": "OKFN"}], "license": "cc-by-4.0", "imprint_publisher":
        "Zenodo", "upload_type": "dataset", "prereserve_doi": {"doi": "10.5281/zenodo.298295",
        "recid": 298295}}, "title": "Test Package With Meta", "links": {"self": "https://sandbox.zenodo.org/api/deposit/depositions/298295",
        "html": "https://sandbox.zenodo.org/deposit/298295", "badge": "https://sandbox.zenodo.org/badge/doi/.svg",
        "files": "https://sandbox.zenodo.org/api/deposit/depositions/298295/files",
        "bucket": "https://sandbox.zenodo.org/api/files/f0e25dc6-faec-4086-83a1-257650a72542",
        "latest_draft": "https://sandbox.zenodo.org/api/deposit/depositions/298295",
        "latest_draft_html": "https://sandbox.zenodo.org/deposit/298295", "publish":
        "https://sandbox.zenodo.org/api/deposit/depositions/298295/actions/publish",
        "edit": "https://sandbox.zenodo.org/api/deposit/depositions/298295/actions/edit",
        "discard": "https://sandbox.zenodo.org/api/deposit/depositions/298295/actions/discard",
        "newversion": "https://sandbox.zenodo.org/api/deposit/depositions/298295/actions/newversion"},
        "record_id": 298295, "owner": 43920, "files": [], "state": "unsubmitted",
        "submitted": false}'
    headers:
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Content-Type, ETag, Link, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset
      content-encoding:
      - gzip
      content-security-policy:
      - 'default-src ''self'' fonts.googleapis.com *.gstatic.com data: ''unsafe-inline''
        ''unsafe-eval'' blob: zenodo-broker.web.cern.ch zenodo-broker-qa.web.cern.ch
        maxcdn.bootstrapcdn.com cdnjs.cloudflare.com ajax.googleapis.com webanalytics.web.cern.ch'
      content-type:
      - application/json
      date:
      - Sat, 26 Jul 2025 12:01:27 GMT
      etag:
      - W/"6"
      permissions-policy:
      - interest-cohort=()
      referrer-policy:
      - strict-origin-when-cross-origin
      retry-after:
      - '44'
      server:
      - nginx
      set-cookie:
      - csrftoken=eyJhbGciOiJIUzUxMiIsImlhdCI6MTc1MzUzMTI4NywiZXhwIjoxNzUzNjE3Njg3fQ.Im5LRUxtQkxWTXJRZTZYaDdudWpTdEdTSDRnd0p6S0JNIg.Oib8vWMEvQxTw4vIdFyoNSwtT6btyDA_xhjMtlXEoEifPcjrKMk7Tu687K4yPUIGXXSKHr3JNfu2SYZaazKspw;
        Expires=Sat, 02 Aug 2025 12:01:27 GMT; Max-Age=604800; Secure; Path=/; SameSite=Lax
      - 04f20c86f07421a9ec0f9d5ba4be544f=4e9e05744db2c0ebb5576f2c8df91de5; path=/;
        HttpOnly; Secure; SameSite=None
      strict-transport-security:
      - max-age=31556926; includeSubDomains
      - max-age=15768000
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-frame-options:
      - sameorigin
      x-ratelimit-limit:
      - '1000'
      x-ratelimit-remaining:
      - '951'
      x-ratelimit-reset:
      - '1753531332'
      x-request-id:
      - ca5c63dd084648cd0279b141e8906509
      x-xss-protection:
      - 1; mode=block
    status:
      code: 200
      message: OK
- request:
    body: "--c849d18f181ff7698ccdc0e442cd5f0d\r\nContent-Disposition: form-data; name=\"filename\"\r\n\r\n/tmp/pytest-of-coroa/pytest-9/test_zenodo_adapter_write_reso7/tmpwrlls893/datapackage.json\r\n--c849d18f181ff7698ccdc0e442cd5f0d\r\nContent-Disposition:
      form-data; name=\"file\"; filename=\"datapackage.json\"\r\n\r\n{\n  \"name\":
      \"testing\",\n  \"title\": \"Test Package With Meta\",\n  \"description\": \"This
      is a test package to test zenodo write function\",\n  \"licenses\": [\n    {\n
      \     \"name\": \"CC-BY-4.0\",\n      \"title\": \"Creative Commons Attribution
      4.0\",\n      \"path\": \"https://creativecommons.org/licenses/by/4.0/\"\n    }\n
      \ ],\n  \"contributors\": [\n    {\n      \"title\": \"Test FD\",\n      \"role\":
      \"author\",\n      \"organization\": \"OKFN\"\n    }\n  ],\n  \"keywords\":
      [\n    \"testdata\",\n    \"testzenodowrite\",\n    \"frictionlessdata\"\n  ],\n
      \ \"created\": \"1985-04-12T23:20:50.52Z\",\n  \"resources\": [\n    {\n      \"name\":
      \"data\",\n      \"type\": \"table\",\n      \"path\": \"data.csv\",\n      \"scheme\":
      \"file\",\n      \"format\": \"csv\",\n      \"mediatype\": \"text/csv\",\n
      \     \"schema\": {\n        \"fields\": [\n          {\n            \"name\":
      \"id\",\n            \"type\": \"string\",\n            \"constraints\": {\n
      \             \"required\": true\n            }\n          },\n          {\n
      \           \"name\": \"name\",\n            \"type\": \"string\"\n          },\n
      \         {\n            \"name\": \"description\",\n            \"type\": \"string\"\n
      \         },\n          {\n            \"name\": \"amount\",\n            \"type\":
      \"number\"\n          }\n        ],\n        \"primaryKey\": [\n          \"id\"\n
      \       ]\n      }\n    },\n    {\n      \"name\": \"data2\",\n      \"type\":
      \"table\",\n      \"path\": \"data2.csv\",\n      \"scheme\": \"file\",\n      \"format\":
      \"csv\",\n      \"mediatype\": \"text/csv\",\n      \"schema\": {\n        \"fields\":
      [\n          {\n            \"name\": \"parent\",\n            \"type\": \"string\"\n
      \         },\n          {\n            \"name\": \"comment\",\n            \"type\":
      \"string\"\n          }\n        ],\n        \"foreignKeys\": [\n          {\n
      \           \"fields\": [\n              \"parent\"\n            ],\n            \"reference\":
      {\n              \"resource\": \"data\",\n              \"fields\": [\n                \"id\"\n
      \             ]\n            }\n          }\n        ]\n      }\n    }\n  ]\n}\r\n--c849d18f181ff7698ccdc0e442cd5f0d--\r\n"
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate, zstd
      Connection:
      - keep-alive
      Content-Length:
      - '2221'
      Content-Type:
      - multipart/form-data; boundary=c849d18f181ff7698ccdc0e442cd5f0d
      User-Agent:
      - python-requests/2.32.4
    method: POST
    uri: https://sandbox.zenodo.org/api//deposit/depositions/298295/files
  response:
    body:
      string: '{"id": "f6985b78-a682-4752-920a-876c661548b3", "filename": "datapackage.json",
        "filesize": 1890.0, "checksum": "e2393a673a7bbfcc1519127d988550aa", "links":
        {"self": "https://sandbox.zenodo.org/api/deposit/depositions/298295/files/f6985b78-a682-4752-920a-876c661548b3",
        "download": "https://sandbox.zenodo.org/api/records/298295/draft/files/datapackage.json/content"}}'
    headers:
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Content-Type, ETag, Link, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset
      content-length:
      - '367'
      content-security-policy:
      - 'default-src ''self'' fonts.googleapis.com *.gstatic.com data: ''unsafe-inline''
        ''unsafe-eval'' blob: zenodo-broker.web.cern.ch zenodo-broker-qa.web.cern.ch
        maxcdn.bootstrapcdn.com cdnjs.cloudflare.com ajax.googleapis.com webanalytics.web.cern.ch'
      content-type:
      - application/json
      date:
      - Sat, 26 Jul 2025 12:01:27 GMT
      permissions-policy:
      - interest-cohort=()
      referrer-policy:
      - strict-origin-when-cross-origin
      retry-after:
      - '44'
      server:
      - nginx
      set-cookie:
      - csrftoken=eyJhbGciOiJIUzUxMiIsImlhdCI6MTc1MzUzMTI4NywiZXhwIjoxNzUzNjE3Njg3fQ.InNqMVo5ZGhvTjRlenpMN2F1MVE4N2NOQlNHZnJlOUhjIg.ujulDAwZdQxKsnC0XHlm1CrEQaIaAEPaJoDPlcArtYi3bApW1EAqWQkvAbJT15yvCn_yov5zM038JxUAL6o1eA;
        Expires=Sat, 02 Aug 2025 12:01:27 GMT; Max-Age=604800; Secure; Path=/; SameSite=Lax
      - 04f20c86f07421a9ec0f9d5ba4be544f=49f6e1f731e59ba2571d6cc21ea961bc; path=/;
        HttpOnly; Secure; SameSite=None
      strict-transport-security:
      - max-age=31556926; includeSubDomains
      - max-age=15768000
      x-content-type-options:
      - nosniff
      x-frame-options:
      - sameorigin
      x-ratelimit-limit:
      - '1000'
      x-ratelimit-remaining:
      - '950'
      x-ratelimit-reset:
      - '1753531332'
      x-request-id:
      - cbe3fc98390ba0a90e5499bab8dce330
      x-xss-protection:
      - 1; mode=block
    status:
      code: 201
      message: CREATED
- request:
    body: "--ca8a1b4675c7b6ed849f8c6f48841ac6\r\nContent-Disposition: form-data; name=\"filename\"\r\n\r\ndata/package/data.csv\r\n--ca8a1b4675c7b6ed849f8c6f48841ac6\r\nContent-Disposition:
      form-data; name=\"file\"; filename=\"data.csv\"\r\n\r\nid,name,description,amount\nA3001,Taxes,Taxes
      we collect,10000.5\nA5032,Parking Fees,Parking fees we collect,2000.5\n\r\n--ca8a1b4675c7b6ed849f8c6f48841ac6--\r\n"
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate, zstd
      Connection:
      - keep-alive
      Content-Length:
      - '368'
      Content-Type:
      - multipart/form-data; boundary=ca8a1b4675c7b6ed849f8c6f48841ac6
      User-Agent:
      - python-requests/2.32.4
    method: POST
    uri: https://sandbox.zenodo.org/api//deposit/depositions/298295/files
  response:
    body:
      string: '{"id": "2f5267cc-2898-4b22-98ef-138757f563de", "filename": "data.csv",
        "filesize": 114.0, "checksum": "c028f525f314c49ea48ed09e82292ed2", "links":
        {"self": "https://sandbox.zenodo.org/api/deposit/depositions/298295/files/2f5267cc-2898-4b22-98ef-138757f563de",
        "download": "https://sandbox.zenodo.org/api/records/298295/draft/files/data.csv/content"}}'
    headers:
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Content-Type, ETag, Link, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset
      content-length:
      - '350'
      content-security-policy:
      - 'default-src ''self'' fonts.googleapis.com *.gstatic.com data: ''unsafe-inline''
        ''unsafe-eval'' blob: zenodo-broker.web.cern.ch zenodo-broker-qa.web.cern.ch
        maxcdn.bootstrapcdn.com cdnjs.cloudflare.com ajax.googleapis.com webanalytics.web.cern.ch'
      content-type:
      - application/json
      date:
      - Sat, 26 Jul 2025 12:01:27 GMT
      permissions-policy:
      - interest-cohort=()
      referrer-policy:
      - strict-origin-when-cross-origin
      retry-after:
      - '44'
      server:
      - nginx
      set-cookie:
      - csrftoken=eyJhbGciOiJIUzUxMiIsImlhdCI6MTc1MzUzMTI4NywiZXhwIjoxNzUzNjE3Njg3fQ.IkY0cmxuVUN6bTRRclRwanpxRUJLMDBBWnI4RndhOUhtIg.EWFHOLL0QR1YmEDzx6fJfJ9eZfGFDkukUODSnH_rnqvYgHiBM61LDMQkeB6zDbStrt0PA3C4rnt964DC46DM3Q;
        Expires=Sat, 02 Aug 2025 12:01:27 GMT; Max-Age=604800; Secure; Path=/; SameSite=Lax
      - 04f20c86f07421a9ec0f9d5ba4be544f=49f6e1f731e59ba2571d6cc21ea961bc; path=/;
        HttpOnly; Secure; SameSite=None
      strict-transport-security:
      - max-age=31556926; includeSubDomains
      - max-age=15768000
      x-content-type-options:
      - nosniff
      x-frame-options:
      - sameorigin
      x-ratelimit-limit:
      - '1000'
      x-ratelimit-remaining:
      - '949'
      x-ratelimit-reset:
      - '1753531332'
      x-request-id:
      - 240ab13359431f86c7227387d278fb17
      x-xss-protection:
      - 1; mode=block
    status:
      code: 201
      message: CREATED
- request:
    body: "--c9c6a336e0b0920d5754b1528b38ff8f\r\nContent-Disposition: form-data; name=\"filename\"\r\n\r\ndata/package/data2.csv\r\n--c9c6a336e0b0920d5754b1528b38ff8f\r\nContent-Disposition:
      form-data; name=\"file\"; filename=\"data2.csv\"\r\n\r\nparent,comment\nA3001,comment1\nA3001,comment2\nA5032,comment3\n\r\n--c9c6a336e0b0920d5754b1528b38ff8f--\r\n"
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate, zstd
      Connection:
      - keep-alive
      Content-Length:
      - '316'
      Content-Type:
      - multipart/form-data; boundary=c9c6a336e0b0920d5754b1528b38ff8f
      User-Agent:
      - python-requests/2.32.4
    method: POST
    uri: https://sandbox.zenodo.org/api//deposit/depositions/298295/files
  response:
    body:
      string: '{"id": "bf07c715-a366-4cdd-92f5-aff7969914e4", "filename": "data2.csv",
        "filesize": 60.0, "checksum": "cb4a683d8eecb72c9ac9beea91fd592e", "links":
        {"self": "https://sandbox.zenodo.org/api/deposit/depositions/298295/files/bf07c715-a366-4cdd-92f5-aff7969914e4",
        "download": "https://sandbox.zenodo.org/api/records/298295/draft/files/data2.csv/content"}}'
    headers:
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Content-Type, ETag, Link, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset
      content-length:
      - '351'
      content-security-policy:
      - 'default-src ''self'' fonts.googleapis.com *.gstatic.com data: ''unsafe-inline''
        ''unsafe-eval'' blob: zenodo-broker.web.cern.ch zenodo-broker-qa.web.cern.ch
        maxcdn.bootstrapcdn.com cdnjs.cloudflare.com ajax.googleapis.com webanalytics.web.cern.ch'
      content-type:
      - application/json
      date:
      - Sat, 26 Jul 2025 12:01:28 GMT
      permissions-policy:
      - interest-cohort=()
      referrer-policy:
      - strict-origin-when-cross-origin
      retry-after:
      - '43'
      server:
      - nginx
      set-cookie:
      - csrftoken=eyJhbGciOiJIUzUxMiIsImlhdCI6MTc1MzUzMTI4OCwiZXhwIjoxNzUzNjE3Njg4fQ.IjFLRVhxbDE1ckVMY3VZazJxU3N3VTcyN0I5VGpLUHc3Ig.Qe_eEV9tSHXjd0qfvFb7l1sbh66zHf8DzkwDJyj0VckIZZjYbVjZHAKTWid0LDnrJ4hFQ5VlsPIt0_guc4PO9g;
        Expires=Sat, 02 Aug 2025 12:01:28 GMT; Max-Age=604800; Secure; Path=/; SameSite=Lax
      - 04f20c86f07421a9ec0f9d5ba4be544f=4e9e05744db2c0ebb5576f2c8df91de5; path=/;
        HttpOnly; Secure; SameSite=None
      strict-transport-security:
      - max-age=31556926; includeSubDomains
      - max-age=15768000
      x-content-type-options:
      - nosniff
      x-frame-options:
      - sameorigin
      x-ratelimit-limit:
      - '1000'
      x-ratelimit-remaining:
      - '948'
      x-ratelimit-reset:
      - '1753531332'
      x-request-id:
      - 109b6eaf090b4819d6770541eb7925b0
      x-xss-protection:
      - 1; mode=block
    status:
      code: 201
      message: CREATED
version: 1
