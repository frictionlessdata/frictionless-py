interactions:
- request:
    body: '{}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate, zstd
      Connection:
      - keep-alive
      Content-Length:
      - '2'
      Content-Type:
      - application/json
      User-Agent:
      - python-requests/2.32.3
    method: POST
    uri: https://zenodo.org/api//deposit/depositions
  response:
    body:
      string: '{"created": "2025-05-30T09:10:38.297297+00:00", "modified": "2025-05-30T09:10:38.368842+00:00",
        "id": 15552264, "conceptrecid": "15552263", "metadata": {"access_right": "open",
        "prereserve_doi": {"doi": "10.5281/zenodo.15552264", "recid": 15552264}},
        "title": "", "links": {"self": "https://zenodo.org/api/deposit/depositions/15552264",
        "html": "https://zenodo.org/deposit/15552264", "badge": "https://zenodo.org/badge/doi/.svg",
        "files": "https://zenodo.org/api/deposit/depositions/15552264/files", "bucket":
        "https://zenodo.org/api/files/1c81a65c-10de-4af5-ba84-26813b133c99", "latest_draft":
        "https://zenodo.org/api/deposit/depositions/15552264", "latest_draft_html":
        "https://zenodo.org/deposit/15552264", "publish": "https://zenodo.org/api/deposit/depositions/15552264/actions/publish",
        "edit": "https://zenodo.org/api/deposit/depositions/15552264/actions/edit",
        "discard": "https://zenodo.org/api/deposit/depositions/15552264/actions/discard",
        "newversion": "https://zenodo.org/api/deposit/depositions/15552264/actions/newversion"},
        "record_id": 15552264, "owner": 31725, "files": [], "state": "unsubmitted",
        "submitted": false}'
    headers:
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Content-Type, ETag, Link, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset
      content-length:
      - '1134'
      content-security-policy:
      - 'default-src ''self'' fonts.googleapis.com *.gstatic.com data: ''unsafe-inline''
        ''unsafe-eval'' blob: zenodo-broker.web.cern.ch zenodo-broker-qa.web.cern.ch
        maxcdn.bootstrapcdn.com cdnjs.cloudflare.com ajax.googleapis.com webanalytics.web.cern.ch'
      content-type:
      - application/json
      date:
      - Fri, 30 May 2025 09:10:38 GMT
      etag:
      - '"4"'
      permissions-policy:
      - interest-cohort=()
      referrer-policy:
      - strict-origin-when-cross-origin
      retry-after:
      - '46'
      server:
      - nginx
      set-cookie:
      - csrftoken=eyJhbGciOiJIUzUxMiIsImlhdCI6MTc0ODU5NjIzOCwiZXhwIjoxNzQ4NjgyNjM4fQ.IlVHSXNyajNsRHNRN2ZuU25QblU3U1F0ZzI4Zjh1eHBhIg.WyIXem8OEUT7j0qKlFpHVIjth3lkAWGdRsy1PDKMWTaBDyT1Po4TrqkDe-5ivgpEata-FMCYvggtMO9ixzaufw;
        Expires=Fri, 06 Jun 2025 09:10:38 GMT; Max-Age=604800; Secure; Path=/; SameSite=Lax
      - 5569e5a730cade8ff2b54f1e815f3670=0acb936b975d164e9af26483a08df23e; path=/;
        HttpOnly; Secure; SameSite=None
      strict-transport-security:
      - max-age=31556926; includeSubDomains
      - max-age=15768000
      x-content-type-options:
      - nosniff
      x-frame-options:
      - sameorigin
      x-ratelimit-limit:
      - '1000'
      x-ratelimit-remaining:
      - '979'
      x-ratelimit-reset:
      - '1748596285'
      x-request-id:
      - 37e4b14a002c125ee612730ac39ff797
      x-xss-protection:
      - 1; mode=block
    status:
      code: 201
      message: CREATED
- request:
    body: "{\n  \"metadata\": {\n    \"title\": \"Test Package With Meta\",\n    \"description\":
      \"This is a test package to test zenodo write function\",\n    \"publication_date\":
      \"2025-05-30\",\n    \"license\": \"CC-BY-4.0\",\n    \"upload_type\": \"dataset\",\n
      \   \"access_right\": \"open\",\n    \"creators\": [\n      {\n        \"name\":
      \"Test FD\",\n        \"affiliation\": \"OKFN\"\n      }\n    ]\n  }\n}"
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate, zstd
      Connection:
      - keep-alive
      Content-Length:
      - '358'
      Content-Type:
      - application/json
      User-Agent:
      - python-requests/2.32.3
    method: PUT
    uri: https://zenodo.org/api//deposit/depositions/15552264
  response:
    body:
      string: '{"created": "2025-05-30T09:10:38.297297+00:00", "modified": "2025-05-30T09:10:38.703256+00:00",
        "id": 15552264, "conceptrecid": "15552263", "metadata": {"title": "Test Package
        With Meta", "publication_date": "2025-05-30", "description": "This is a test
        package to test zenodo write function", "access_right": "open", "creators":
        [{"name": "Test FD", "affiliation": "OKFN"}], "license": "cc-by-4.0", "imprint_publisher":
        "Zenodo", "upload_type": "dataset", "prereserve_doi": {"doi": "10.5281/zenodo.15552264",
        "recid": 15552264}}, "title": "Test Package With Meta", "links": {"self":
        "https://zenodo.org/api/deposit/depositions/15552264", "html": "https://zenodo.org/deposit/15552264",
        "badge": "https://zenodo.org/badge/doi/.svg", "files": "https://zenodo.org/api/deposit/depositions/15552264/files",
        "bucket": "https://zenodo.org/api/files/1c81a65c-10de-4af5-ba84-26813b133c99",
        "latest_draft": "https://zenodo.org/api/deposit/depositions/15552264", "latest_draft_html":
        "https://zenodo.org/deposit/15552264", "publish": "https://zenodo.org/api/deposit/depositions/15552264/actions/publish",
        "edit": "https://zenodo.org/api/deposit/depositions/15552264/actions/edit",
        "discard": "https://zenodo.org/api/deposit/depositions/15552264/actions/discard",
        "newversion": "https://zenodo.org/api/deposit/depositions/15552264/actions/newversion"},
        "record_id": 15552264, "owner": 31725, "files": [], "state": "unsubmitted",
        "submitted": false}'
    headers:
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Content-Type, ETag, Link, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset
      content-encoding:
      - gzip
      content-security-policy:
      - 'default-src ''self'' fonts.googleapis.com *.gstatic.com data: ''unsafe-inline''
        ''unsafe-eval'' blob: zenodo-broker.web.cern.ch zenodo-broker-qa.web.cern.ch
        maxcdn.bootstrapcdn.com cdnjs.cloudflare.com ajax.googleapis.com webanalytics.web.cern.ch'
      content-type:
      - application/json
      date:
      - Fri, 30 May 2025 09:10:38 GMT
      etag:
      - W/"6"
      permissions-policy:
      - interest-cohort=()
      referrer-policy:
      - strict-origin-when-cross-origin
      retry-after:
      - '46'
      server:
      - nginx
      set-cookie:
      - csrftoken=eyJhbGciOiJIUzUxMiIsImlhdCI6MTc0ODU5NjIzOCwiZXhwIjoxNzQ4NjgyNjM4fQ.IldjT0xYaGNpM2pZclVxVjNQcHdPam5pMFN5MTQzbk53Ig.SfNdjPM8hFhdDlyvX_q9EYf0yNVntZN3B56jghcOvXtt7D7EAj06947aCMCCkmJwMo5kfiIJMQ9W5GYKzKrutA;
        Expires=Fri, 06 Jun 2025 09:10:38 GMT; Max-Age=604800; Secure; Path=/; SameSite=Lax
      - 5569e5a730cade8ff2b54f1e815f3670=545de0b26a2c17291314e9f199cfc92e; path=/;
        HttpOnly; Secure; SameSite=None
      strict-transport-security:
      - max-age=31556926; includeSubDomains
      - max-age=15768000
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-frame-options:
      - sameorigin
      x-ratelimit-limit:
      - '1000'
      x-ratelimit-remaining:
      - '978'
      x-ratelimit-reset:
      - '1748596285'
      x-request-id:
      - 5c631c66a4af9ebca05edd02e7e70bfd
      x-xss-protection:
      - 1; mode=block
    status:
      code: 200
      message: OK
- request:
    body: "--b27f3a4a0e92b4c8b9eff81b76c43216\r\nContent-Disposition: form-data; name=\"filename\"\r\n\r\n/tmp/tmp1b6wafpw/datapackage.json\r\n--b27f3a4a0e92b4c8b9eff81b76c43216\r\nContent-Disposition:
      form-data; name=\"file\"; filename=\"datapackage.json\"\r\n\r\n{\n  \"name\":
      \"testing\",\n  \"title\": \"Test Package With Meta\",\n  \"description\": \"This
      is a test package to test zenodo write function\",\n  \"licenses\": [\n    {\n
      \     \"name\": \"CC-BY-4.0\",\n      \"title\": \"Creative Commons Attribution
      4.0\",\n      \"path\": \"https://creativecommons.org/licenses/by/4.0/\"\n    }\n
      \ ],\n  \"contributors\": [\n    {\n      \"title\": \"Test FD\",\n      \"role\":
      \"author\",\n      \"organization\": \"OKFN\"\n    }\n  ],\n  \"keywords\":
      [\n    \"testdata\",\n    \"testzenodowrite\",\n    \"frictionlessdata\"\n  ],\n
      \ \"created\": \"1985-04-12T23:20:50.52Z\",\n  \"resources\": [\n    {\n      \"name\":
      \"data\",\n      \"type\": \"table\",\n      \"path\": \"data.csv\",\n      \"scheme\":
      \"file\",\n      \"format\": \"csv\",\n      \"mediatype\": \"text/csv\",\n
      \     \"schema\": {\n        \"fields\": [\n          {\n            \"name\":
      \"id\",\n            \"type\": \"string\",\n            \"constraints\": {\n
      \             \"required\": true\n            }\n          },\n          {\n
      \           \"name\": \"name\",\n            \"type\": \"string\"\n          },\n
      \         {\n            \"name\": \"description\",\n            \"type\": \"string\"\n
      \         },\n          {\n            \"name\": \"amount\",\n            \"type\":
      \"number\"\n          }\n        ],\n        \"primaryKey\": [\n          \"id\"\n
      \       ]\n      }\n    },\n    {\n      \"name\": \"data2\",\n      \"type\":
      \"table\",\n      \"path\": \"data2.csv\",\n      \"scheme\": \"file\",\n      \"format\":
      \"csv\",\n      \"mediatype\": \"text/csv\",\n      \"schema\": {\n        \"fields\":
      [\n          {\n            \"name\": \"parent\",\n            \"type\": \"string\"\n
      \         },\n          {\n            \"name\": \"comment\",\n            \"type\":
      \"string\"\n          }\n        ],\n        \"foreignKeys\": [\n          {\n
      \           \"fields\": [\n              \"parent\"\n            ],\n            \"reference\":
      {\n              \"resource\": \"data\",\n              \"fields\": [\n                \"id\"\n
      \             ]\n            }\n          }\n        ]\n      }\n    }\n  ]\n}\r\n--b27f3a4a0e92b4c8b9eff81b76c43216--\r\n"
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate, zstd
      Connection:
      - keep-alive
      Content-Length:
      - '2164'
      Content-Type:
      - multipart/form-data; boundary=b27f3a4a0e92b4c8b9eff81b76c43216
      User-Agent:
      - python-requests/2.32.3
    method: POST
    uri: https://zenodo.org/api//deposit/depositions/15552264/files
  response:
    body:
      string: '{"id": "76197a5b-e40e-442f-9424-8a99b0986158", "filename": "datapackage.json",
        "filesize": 1890.0, "checksum": "e2393a673a7bbfcc1519127d988550aa", "links":
        {"self": "https://zenodo.org/api/deposit/depositions/15552264/files/76197a5b-e40e-442f-9424-8a99b0986158",
        "download": "https://zenodo.org/api/records/15552264/draft/files/datapackage.json/content"}}'
    headers:
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Content-Type, ETag, Link, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset
      content-length:
      - '355'
      content-security-policy:
      - 'default-src ''self'' fonts.googleapis.com *.gstatic.com data: ''unsafe-inline''
        ''unsafe-eval'' blob: zenodo-broker.web.cern.ch zenodo-broker-qa.web.cern.ch
        maxcdn.bootstrapcdn.com cdnjs.cloudflare.com ajax.googleapis.com webanalytics.web.cern.ch'
      content-type:
      - application/json
      date:
      - Fri, 30 May 2025 09:10:39 GMT
      permissions-policy:
      - interest-cohort=()
      referrer-policy:
      - strict-origin-when-cross-origin
      retry-after:
      - '45'
      server:
      - nginx
      set-cookie:
      - csrftoken=eyJhbGciOiJIUzUxMiIsImlhdCI6MTc0ODU5NjIzOSwiZXhwIjoxNzQ4NjgyNjM5fQ.InFFRlBpUmRHTkRpZmE1NGFaSklmcDFLMDlsWU93UXA4Ig.g46F5xEURVFHCX0Oo5HB9QR5id7ZzZ4ZjPLe5Q0DqeAobct7RHuv7nmQHZfMvAZLJ3lMT3e-MHZyS0OtEry8lQ;
        Expires=Fri, 06 Jun 2025 09:10:39 GMT; Max-Age=604800; Secure; Path=/; SameSite=Lax
      - 5569e5a730cade8ff2b54f1e815f3670=852cce4b5ad82efbabcf7077d7f7913d; path=/;
        HttpOnly; Secure; SameSite=None
      strict-transport-security:
      - max-age=31556926; includeSubDomains
      - max-age=15768000
      x-content-type-options:
      - nosniff
      x-frame-options:
      - sameorigin
      x-ratelimit-limit:
      - '1000'
      x-ratelimit-remaining:
      - '977'
      x-ratelimit-reset:
      - '1748596285'
      x-request-id:
      - 59c22fd0d516a8baefd553cf204d82d8
      x-xss-protection:
      - 1; mode=block
    status:
      code: 201
      message: CREATED
- request:
    body: "--bffaff2e872dc569ad143216b8b99cd4\r\nContent-Disposition: form-data; name=\"filename\"\r\n\r\ndata/package/data.csv\r\n--bffaff2e872dc569ad143216b8b99cd4\r\nContent-Disposition:
      form-data; name=\"file\"; filename=\"data.csv\"\r\n\r\nid,name,description,amount\nA3001,Taxes,Taxes
      we collect,10000.5\nA5032,Parking Fees,Parking fees we collect,2000.5\n\r\n--bffaff2e872dc569ad143216b8b99cd4--\r\n"
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate, zstd
      Connection:
      - keep-alive
      Content-Length:
      - '368'
      Content-Type:
      - multipart/form-data; boundary=bffaff2e872dc569ad143216b8b99cd4
      User-Agent:
      - python-requests/2.32.3
    method: POST
    uri: https://zenodo.org/api//deposit/depositions/15552264/files
  response:
    body:
      string: '{"id": "80d85825-c3de-4c32-a0f9-650a673b1365", "filename": "data.csv",
        "filesize": 114.0, "checksum": "c028f525f314c49ea48ed09e82292ed2", "links":
        {"self": "https://zenodo.org/api/deposit/depositions/15552264/files/80d85825-c3de-4c32-a0f9-650a673b1365",
        "download": "https://zenodo.org/api/records/15552264/draft/files/data.csv/content"}}'
    headers:
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Content-Type, ETag, Link, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset
      content-length:
      - '338'
      content-security-policy:
      - 'default-src ''self'' fonts.googleapis.com *.gstatic.com data: ''unsafe-inline''
        ''unsafe-eval'' blob: zenodo-broker.web.cern.ch zenodo-broker-qa.web.cern.ch
        maxcdn.bootstrapcdn.com cdnjs.cloudflare.com ajax.googleapis.com webanalytics.web.cern.ch'
      content-type:
      - application/json
      date:
      - Fri, 30 May 2025 09:10:39 GMT
      permissions-policy:
      - interest-cohort=()
      referrer-policy:
      - strict-origin-when-cross-origin
      retry-after:
      - '27'
      server:
      - nginx
      set-cookie:
      - csrftoken=eyJhbGciOiJIUzUxMiIsImlhdCI6MTc0ODU5NjIzOSwiZXhwIjoxNzQ4NjgyNjM5fQ.InZVTzlJMUZnT2gwNDRIRUJZR2xGRnVQS0dwc2JpVnUyIg.ZtdZnUzdS6OFRHfOVw2A_oZK11hI9A2gU5vKd80Lt5R3Nzcjz1TpvjBcUBxxxLy0SWvcU91rAqou69znAo6kWw;
        Expires=Fri, 06 Jun 2025 09:10:39 GMT; Max-Age=604800; Secure; Path=/; SameSite=Lax
      - 5569e5a730cade8ff2b54f1e815f3670=aadb4b75189d336794d49cd6bc272fae; path=/;
        HttpOnly; Secure; SameSite=None
      strict-transport-security:
      - max-age=31556926; includeSubDomains
      - max-age=15768000
      x-content-type-options:
      - nosniff
      x-frame-options:
      - sameorigin
      x-ratelimit-limit:
      - '133'
      x-ratelimit-remaining:
      - '94'
      x-ratelimit-reset:
      - '1748596267'
      x-request-id:
      - 4b0ad66fb67f9dd00d456875624fe962
      x-xss-protection:
      - 1; mode=block
    status:
      code: 201
      message: CREATED
- request:
    body: "--567b1a0169c38a041f73ca101e6a8acd\r\nContent-Disposition: form-data; name=\"filename\"\r\n\r\ndata/package/data2.csv\r\n--567b1a0169c38a041f73ca101e6a8acd\r\nContent-Disposition:
      form-data; name=\"file\"; filename=\"data2.csv\"\r\n\r\nparent,comment\nA3001,comment1\nA3001,comment2\nA5032,comment3\n\r\n--567b1a0169c38a041f73ca101e6a8acd--\r\n"
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate, zstd
      Connection:
      - keep-alive
      Content-Length:
      - '316'
      Content-Type:
      - multipart/form-data; boundary=567b1a0169c38a041f73ca101e6a8acd
      User-Agent:
      - python-requests/2.32.3
    method: POST
    uri: https://zenodo.org/api//deposit/depositions/15552264/files
  response:
    body:
      string: '{"id": "93f0df53-27ac-4ff9-a474-50e07781d94d", "filename": "data2.csv",
        "filesize": 60.0, "checksum": "cb4a683d8eecb72c9ac9beea91fd592e", "links":
        {"self": "https://zenodo.org/api/deposit/depositions/15552264/files/93f0df53-27ac-4ff9-a474-50e07781d94d",
        "download": "https://zenodo.org/api/records/15552264/draft/files/data2.csv/content"}}'
    headers:
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Content-Type, ETag, Link, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset
      content-length:
      - '339'
      content-security-policy:
      - 'default-src ''self'' fonts.googleapis.com *.gstatic.com data: ''unsafe-inline''
        ''unsafe-eval'' blob: zenodo-broker.web.cern.ch zenodo-broker-qa.web.cern.ch
        maxcdn.bootstrapcdn.com cdnjs.cloudflare.com ajax.googleapis.com webanalytics.web.cern.ch'
      content-type:
      - application/json
      date:
      - Fri, 30 May 2025 09:10:39 GMT
      permissions-policy:
      - interest-cohort=()
      referrer-policy:
      - strict-origin-when-cross-origin
      retry-after:
      - '27'
      server:
      - nginx
      set-cookie:
      - csrftoken=eyJhbGciOiJIUzUxMiIsImlhdCI6MTc0ODU5NjIzOSwiZXhwIjoxNzQ4NjgyNjM5fQ.InlGQjJRZFBMWjVLNlEyOVhFRVV2Rk1UOWUyalh6RTc0Ig.4AkXMZTlxc9UkDP7EwddRLKqC9XwDIOXkJw7rK_p8VgrFJZleweMLAXt-PwQaQEHxOierFi8Z8FCtBITDuyZ3A;
        Expires=Fri, 06 Jun 2025 09:10:39 GMT; Max-Age=604800; Secure; Path=/; SameSite=Lax
      - 5569e5a730cade8ff2b54f1e815f3670=aadb4b75189d336794d49cd6bc272fae; path=/;
        HttpOnly; Secure; SameSite=None
      strict-transport-security:
      - max-age=31556926; includeSubDomains
      - max-age=15768000
      x-content-type-options:
      - nosniff
      x-frame-options:
      - sameorigin
      x-ratelimit-limit:
      - '133'
      x-ratelimit-remaining:
      - '93'
      x-ratelimit-reset:
      - '1748596267'
      x-request-id:
      - 780400ef40c28d33759732e5349ea24b
      x-xss-protection:
      - 1; mode=block
    status:
      code: 201
      message: CREATED
version: 1
