interactions:
- request:
    body: '{}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate, zstd
      Connection:
      - keep-alive
      Content-Length:
      - '2'
      Content-Type:
      - application/json
      User-Agent:
      - python-requests/2.32.3
    method: POST
    uri: https://sandbox.zenodo.org/api//deposit/depositions
  response:
    body:
      string: '{"created": "2025-05-30T09:41:55.935039+00:00", "modified": "2025-05-30T09:41:56.077002+00:00",
        "id": 263032, "conceptrecid": "263031", "metadata": {"access_right": "open",
        "prereserve_doi": {"doi": "10.5281/zenodo.263032", "recid": 263032}}, "title":
        "", "links": {"self": "https://sandbox.zenodo.org/api/deposit/depositions/263032",
        "html": "https://sandbox.zenodo.org/deposit/263032", "badge": "https://sandbox.zenodo.org/badge/doi/.svg",
        "files": "https://sandbox.zenodo.org/api/deposit/depositions/263032/files",
        "bucket": "https://sandbox.zenodo.org/api/files/250f37b5-8df6-4b5c-b00d-1d86c95aff97",
        "latest_draft": "https://sandbox.zenodo.org/api/deposit/depositions/263032",
        "latest_draft_html": "https://sandbox.zenodo.org/deposit/263032", "publish":
        "https://sandbox.zenodo.org/api/deposit/depositions/263032/actions/publish",
        "edit": "https://sandbox.zenodo.org/api/deposit/depositions/263032/actions/edit",
        "discard": "https://sandbox.zenodo.org/api/deposit/depositions/263032/actions/discard",
        "newversion": "https://sandbox.zenodo.org/api/deposit/depositions/263032/actions/newversion"},
        "record_id": 263032, "owner": 43920, "files": [], "state": "unsubmitted",
        "submitted": false}'
    headers:
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Content-Type, ETag, Link, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset
      content-length:
      - '1194'
      content-security-policy:
      - 'default-src ''self'' fonts.googleapis.com *.gstatic.com data: ''unsafe-inline''
        ''unsafe-eval'' blob: zenodo-broker.web.cern.ch zenodo-broker-qa.web.cern.ch
        maxcdn.bootstrapcdn.com cdnjs.cloudflare.com ajax.googleapis.com webanalytics.web.cern.ch'
      content-type:
      - application/json
      date:
      - Fri, 30 May 2025 09:41:56 GMT
      etag:
      - '"4"'
      permissions-policy:
      - interest-cohort=()
      referrer-policy:
      - strict-origin-when-cross-origin
      retry-after:
      - '59'
      server:
      - nginx
      set-cookie:
      - csrftoken=eyJhbGciOiJIUzUxMiIsImlhdCI6MTc0ODU5ODExNiwiZXhwIjoxNzQ4Njg0NTE2fQ.InI1MVRhS0dHeE1NaXRsS2dvR2Y0RWZzMnA2bUdoYkRIIg.vrysGdPPnriygnAFXK4gecxR_GO0OyRFbSk4ZLOY1YxJygnDdMO3duV1B2NrGcVPgkS42s8DqN_5DY0FNgCwNQ;
        Expires=Fri, 06 Jun 2025 09:41:56 GMT; Max-Age=604800; Secure; Path=/; SameSite=Lax
      - 04f20c86f07421a9ec0f9d5ba4be544f=2be6ee371c495443f3e397921a30138e; path=/;
        HttpOnly; Secure; SameSite=None
      strict-transport-security:
      - max-age=31556926; includeSubDomains
      - max-age=15768000
      x-content-type-options:
      - nosniff
      x-frame-options:
      - sameorigin
      x-ratelimit-limit:
      - '133'
      x-ratelimit-remaining:
      - '132'
      x-ratelimit-reset:
      - '1748598176'
      x-request-id:
      - c5537ff4d94de53fd8183e753e2335a6
      x-xss-protection:
      - 1; mode=block
    status:
      code: 201
      message: CREATED
- request:
    body: "{\n  \"metadata\": {\n    \"title\": \"Test Package With Meta\",\n    \"description\":
      \"This is a test package to test zenodo write function\",\n    \"publication_date\":
      \"2025-05-30\",\n    \"license\": \"CC-BY-4.0\",\n    \"upload_type\": \"dataset\",\n
      \   \"access_right\": \"open\",\n    \"creators\": [\n      {\n        \"name\":
      \"Test FD\",\n        \"affiliation\": \"OKFN\"\n      }\n    ]\n  }\n}"
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate, zstd
      Connection:
      - keep-alive
      Content-Length:
      - '358'
      Content-Type:
      - application/json
      User-Agent:
      - python-requests/2.32.3
    method: PUT
    uri: https://sandbox.zenodo.org/api//deposit/depositions/263032
  response:
    body:
      string: '{"created": "2025-05-30T09:41:55.935039+00:00", "modified": "2025-05-30T09:41:56.468225+00:00",
        "id": 263032, "conceptrecid": "263031", "metadata": {"title": "Test Package
        With Meta", "publication_date": "2025-05-30", "description": "This is a test
        package to test zenodo write function", "access_right": "open", "creators":
        [{"name": "Test FD", "affiliation": "OKFN"}], "license": "cc-by-4.0", "imprint_publisher":
        "Zenodo", "upload_type": "dataset", "prereserve_doi": {"doi": "10.5281/zenodo.263032",
        "recid": 263032}}, "title": "Test Package With Meta", "links": {"self": "https://sandbox.zenodo.org/api/deposit/depositions/263032",
        "html": "https://sandbox.zenodo.org/deposit/263032", "badge": "https://sandbox.zenodo.org/badge/doi/.svg",
        "files": "https://sandbox.zenodo.org/api/deposit/depositions/263032/files",
        "bucket": "https://sandbox.zenodo.org/api/files/250f37b5-8df6-4b5c-b00d-1d86c95aff97",
        "latest_draft": "https://sandbox.zenodo.org/api/deposit/depositions/263032",
        "latest_draft_html": "https://sandbox.zenodo.org/deposit/263032", "publish":
        "https://sandbox.zenodo.org/api/deposit/depositions/263032/actions/publish",
        "edit": "https://sandbox.zenodo.org/api/deposit/depositions/263032/actions/edit",
        "discard": "https://sandbox.zenodo.org/api/deposit/depositions/263032/actions/discard",
        "newversion": "https://sandbox.zenodo.org/api/deposit/depositions/263032/actions/newversion"},
        "record_id": 263032, "owner": 43920, "files": [], "state": "unsubmitted",
        "submitted": false}'
    headers:
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Content-Type, ETag, Link, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset
      content-encoding:
      - gzip
      content-security-policy:
      - 'default-src ''self'' fonts.googleapis.com *.gstatic.com data: ''unsafe-inline''
        ''unsafe-eval'' blob: zenodo-broker.web.cern.ch zenodo-broker-qa.web.cern.ch
        maxcdn.bootstrapcdn.com cdnjs.cloudflare.com ajax.googleapis.com webanalytics.web.cern.ch'
      content-type:
      - application/json
      date:
      - Fri, 30 May 2025 09:41:56 GMT
      etag:
      - W/"6"
      permissions-policy:
      - interest-cohort=()
      referrer-policy:
      - strict-origin-when-cross-origin
      retry-after:
      - '59'
      server:
      - nginx
      set-cookie:
      - csrftoken=eyJhbGciOiJIUzUxMiIsImlhdCI6MTc0ODU5ODExNiwiZXhwIjoxNzQ4Njg0NTE2fQ.InpseWpURlpOeVhLZm52YTRHVDd3VmRSa2RyeDdQYWU0Ig.hTu3lJ4MuKHaNPNFDxwp2Ts_qdYaCJO-B2En-N2uaTFQa9jIgsWKzdWl4rdxeeaegFqoU0QEs1uNU1SLQpVjEQ;
        Expires=Fri, 06 Jun 2025 09:41:56 GMT; Max-Age=604800; Secure; Path=/; SameSite=Lax
      - 04f20c86f07421a9ec0f9d5ba4be544f=2be6ee371c495443f3e397921a30138e; path=/;
        HttpOnly; Secure; SameSite=None
      strict-transport-security:
      - max-age=31556926; includeSubDomains
      - max-age=15768000
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-frame-options:
      - sameorigin
      x-ratelimit-limit:
      - '133'
      x-ratelimit-remaining:
      - '131'
      x-ratelimit-reset:
      - '1748598176'
      x-request-id:
      - 497c9cd01f1b60b75406edbd7a961bbc
      x-xss-protection:
      - 1; mode=block
    status:
      code: 200
      message: OK
- request:
    body: "--ae0a3e6167bdb8c0ac887ab46ef9d8e8\r\nContent-Disposition: form-data; name=\"filename\"\r\n\r\n/tmp/tmpr7fqt7k7/datapackage.json\r\n--ae0a3e6167bdb8c0ac887ab46ef9d8e8\r\nContent-Disposition:
      form-data; name=\"file\"; filename=\"datapackage.json\"\r\n\r\n{\n  \"name\":
      \"testing\",\n  \"title\": \"Test Package With Meta\",\n  \"description\": \"This
      is a test package to test zenodo write function\",\n  \"licenses\": [\n    {\n
      \     \"name\": \"CC-BY-4.0\",\n      \"title\": \"Creative Commons Attribution
      4.0\",\n      \"path\": \"https://creativecommons.org/licenses/by/4.0/\"\n    }\n
      \ ],\n  \"contributors\": [\n    {\n      \"title\": \"Test FD\",\n      \"role\":
      \"author\",\n      \"organization\": \"OKFN\"\n    }\n  ],\n  \"keywords\":
      [\n    \"testdata\",\n    \"testzenodowrite\",\n    \"frictionlessdata\"\n  ],\n
      \ \"created\": \"1985-04-12T23:20:50.52Z\",\n  \"resources\": [\n    {\n      \"name\":
      \"data\",\n      \"type\": \"table\",\n      \"path\": \"data.csv\",\n      \"scheme\":
      \"file\",\n      \"format\": \"csv\",\n      \"mediatype\": \"text/csv\",\n
      \     \"schema\": {\n        \"fields\": [\n          {\n            \"name\":
      \"id\",\n            \"type\": \"string\",\n            \"constraints\": {\n
      \             \"required\": true\n            }\n          },\n          {\n
      \           \"name\": \"name\",\n            \"type\": \"string\"\n          },\n
      \         {\n            \"name\": \"description\",\n            \"type\": \"string\"\n
      \         },\n          {\n            \"name\": \"amount\",\n            \"type\":
      \"number\"\n          }\n        ],\n        \"primaryKey\": [\n          \"id\"\n
      \       ]\n      }\n    },\n    {\n      \"name\": \"data2\",\n      \"type\":
      \"table\",\n      \"path\": \"data2.csv\",\n      \"scheme\": \"file\",\n      \"format\":
      \"csv\",\n      \"mediatype\": \"text/csv\",\n      \"schema\": {\n        \"fields\":
      [\n          {\n            \"name\": \"parent\",\n            \"type\": \"string\"\n
      \         },\n          {\n            \"name\": \"comment\",\n            \"type\":
      \"string\"\n          }\n        ],\n        \"foreignKeys\": [\n          {\n
      \           \"fields\": [\n              \"parent\"\n            ],\n            \"reference\":
      {\n              \"resource\": \"data\",\n              \"fields\": [\n                \"id\"\n
      \             ]\n            }\n          }\n        ]\n      }\n    }\n  ]\n}\r\n--ae0a3e6167bdb8c0ac887ab46ef9d8e8--\r\n"
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate, zstd
      Connection:
      - keep-alive
      Content-Length:
      - '2164'
      Content-Type:
      - multipart/form-data; boundary=ae0a3e6167bdb8c0ac887ab46ef9d8e8
      User-Agent:
      - python-requests/2.32.3
    method: POST
    uri: https://sandbox.zenodo.org/api//deposit/depositions/263032/files
  response:
    body:
      string: '{"id": "63830b6d-0ba6-4deb-aa75-fd0f2aefc2e3", "filename": "datapackage.json",
        "filesize": 1890.0, "checksum": "e2393a673a7bbfcc1519127d988550aa", "links":
        {"self": "https://sandbox.zenodo.org/api/deposit/depositions/263032/files/63830b6d-0ba6-4deb-aa75-fd0f2aefc2e3",
        "download": "https://sandbox.zenodo.org/api/records/263032/draft/files/datapackage.json/content"}}'
    headers:
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Content-Type, ETag, Link, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset
      content-length:
      - '367'
      content-security-policy:
      - 'default-src ''self'' fonts.googleapis.com *.gstatic.com data: ''unsafe-inline''
        ''unsafe-eval'' blob: zenodo-broker.web.cern.ch zenodo-broker-qa.web.cern.ch
        maxcdn.bootstrapcdn.com cdnjs.cloudflare.com ajax.googleapis.com webanalytics.web.cern.ch'
      content-type:
      - application/json
      date:
      - Fri, 30 May 2025 09:41:56 GMT
      permissions-policy:
      - interest-cohort=()
      referrer-policy:
      - strict-origin-when-cross-origin
      retry-after:
      - '59'
      server:
      - nginx
      set-cookie:
      - csrftoken=eyJhbGciOiJIUzUxMiIsImlhdCI6MTc0ODU5ODExNiwiZXhwIjoxNzQ4Njg0NTE2fQ.InZhbkxOMGQxbk1Ea3JId1ZkUUY1NWk2OHo1RFhPeThwIg.OpMXS34fyuCr3rMQWzypb334ewlLoyzOQo-b62yX9HIjnmNqkPyQ6PoHjePDBSLC5S8Q1oMDdJmh7hRRR9P8og;
        Expires=Fri, 06 Jun 2025 09:41:56 GMT; Max-Age=604800; Secure; Path=/; SameSite=Lax
      - 04f20c86f07421a9ec0f9d5ba4be544f=2be6ee371c495443f3e397921a30138e; path=/;
        HttpOnly; Secure; SameSite=None
      strict-transport-security:
      - max-age=31556926; includeSubDomains
      - max-age=15768000
      x-content-type-options:
      - nosniff
      x-frame-options:
      - sameorigin
      x-ratelimit-limit:
      - '133'
      x-ratelimit-remaining:
      - '130'
      x-ratelimit-reset:
      - '1748598176'
      x-request-id:
      - 0d73c0303eb238d0baf62c8fbeabee6b
      x-xss-protection:
      - 1; mode=block
    status:
      code: 201
      message: CREATED
- request:
    body: "--d0689a1190e12b2abddcba21b466ff6f\r\nContent-Disposition: form-data; name=\"filename\"\r\n\r\ndata/package/data.csv\r\n--d0689a1190e12b2abddcba21b466ff6f\r\nContent-Disposition:
      form-data; name=\"file\"; filename=\"data.csv\"\r\n\r\nid,name,description,amount\nA3001,Taxes,Taxes
      we collect,10000.5\nA5032,Parking Fees,Parking fees we collect,2000.5\n\r\n--d0689a1190e12b2abddcba21b466ff6f--\r\n"
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate, zstd
      Connection:
      - keep-alive
      Content-Length:
      - '368'
      Content-Type:
      - multipart/form-data; boundary=d0689a1190e12b2abddcba21b466ff6f
      User-Agent:
      - python-requests/2.32.3
    method: POST
    uri: https://sandbox.zenodo.org/api//deposit/depositions/263032/files
  response:
    body:
      string: '{"id": "11aafa63-83ec-4e9e-9c47-6316338e1187", "filename": "data.csv",
        "filesize": 114.0, "checksum": "c028f525f314c49ea48ed09e82292ed2", "links":
        {"self": "https://sandbox.zenodo.org/api/deposit/depositions/263032/files/11aafa63-83ec-4e9e-9c47-6316338e1187",
        "download": "https://sandbox.zenodo.org/api/records/263032/draft/files/data.csv/content"}}'
    headers:
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Content-Type, ETag, Link, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset
      content-length:
      - '350'
      content-security-policy:
      - 'default-src ''self'' fonts.googleapis.com *.gstatic.com data: ''unsafe-inline''
        ''unsafe-eval'' blob: zenodo-broker.web.cern.ch zenodo-broker-qa.web.cern.ch
        maxcdn.bootstrapcdn.com cdnjs.cloudflare.com ajax.googleapis.com webanalytics.web.cern.ch'
      content-type:
      - application/json
      date:
      - Fri, 30 May 2025 09:41:57 GMT
      permissions-policy:
      - interest-cohort=()
      referrer-policy:
      - strict-origin-when-cross-origin
      retry-after:
      - '60'
      server:
      - nginx
      set-cookie:
      - csrftoken=eyJhbGciOiJIUzUxMiIsImlhdCI6MTc0ODU5ODExNywiZXhwIjoxNzQ4Njg0NTE3fQ.Ijg3N0VKdmdxMjRXWHp5bHBISUFpWFJPOVNQaW1MZ215Ig.ufNZMVBLkQ7HLYKDnULpXXtqtUHMCu5vfNLlWliUnqc4RVknJ535ZWeMP3lSei1e77UXu5EiGyZXg8HYnp4Vlw;
        Expires=Fri, 06 Jun 2025 09:41:57 GMT; Max-Age=604800; Secure; Path=/; SameSite=Lax
      - 04f20c86f07421a9ec0f9d5ba4be544f=10bd13aec24bd0e49d2374af0ac6de16; path=/;
        HttpOnly; Secure; SameSite=None
      strict-transport-security:
      - max-age=31556926; includeSubDomains
      - max-age=15768000
      x-content-type-options:
      - nosniff
      x-frame-options:
      - sameorigin
      x-ratelimit-limit:
      - '1000'
      x-ratelimit-remaining:
      - '999'
      x-ratelimit-reset:
      - '1748598178'
      x-request-id:
      - aac1675776124e74f2255d9069497136
      x-xss-protection:
      - 1; mode=block
    status:
      code: 201
      message: CREATED
- request:
    body: "--3f303ea372527d2c9b2370a7020f5b09\r\nContent-Disposition: form-data; name=\"filename\"\r\n\r\ndata/package/data2.csv\r\n--3f303ea372527d2c9b2370a7020f5b09\r\nContent-Disposition:
      form-data; name=\"file\"; filename=\"data2.csv\"\r\n\r\nparent,comment\nA3001,comment1\nA3001,comment2\nA5032,comment3\n\r\n--3f303ea372527d2c9b2370a7020f5b09--\r\n"
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate, zstd
      Connection:
      - keep-alive
      Content-Length:
      - '316'
      Content-Type:
      - multipart/form-data; boundary=3f303ea372527d2c9b2370a7020f5b09
      User-Agent:
      - python-requests/2.32.3
    method: POST
    uri: https://sandbox.zenodo.org/api//deposit/depositions/263032/files
  response:
    body:
      string: '{"id": "2039c6b1-3098-40e3-92ea-fbfd3731e16c", "filename": "data2.csv",
        "filesize": 60.0, "checksum": "cb4a683d8eecb72c9ac9beea91fd592e", "links":
        {"self": "https://sandbox.zenodo.org/api/deposit/depositions/263032/files/2039c6b1-3098-40e3-92ea-fbfd3731e16c",
        "download": "https://sandbox.zenodo.org/api/records/263032/draft/files/data2.csv/content"}}'
    headers:
      access-control-allow-origin:
      - '*'
      access-control-expose-headers:
      - Content-Type, ETag, Link, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset
      content-length:
      - '351'
      content-security-policy:
      - 'default-src ''self'' fonts.googleapis.com *.gstatic.com data: ''unsafe-inline''
        ''unsafe-eval'' blob: zenodo-broker.web.cern.ch zenodo-broker-qa.web.cern.ch
        maxcdn.bootstrapcdn.com cdnjs.cloudflare.com ajax.googleapis.com webanalytics.web.cern.ch'
      content-type:
      - application/json
      date:
      - Fri, 30 May 2025 09:41:57 GMT
      permissions-policy:
      - interest-cohort=()
      referrer-policy:
      - strict-origin-when-cross-origin
      retry-after:
      - '58'
      server:
      - nginx
      set-cookie:
      - csrftoken=eyJhbGciOiJIUzUxMiIsImlhdCI6MTc0ODU5ODExNywiZXhwIjoxNzQ4Njg0NTE3fQ.IlFEWTBlSHgxMmRYcE1qRmQwdWhsejZwbVJRNVdMSFFCIg.FKagS0xI-rshrwfBEwPjKb7M82g1qmaPkqbZbI929pBeW5qBcPz2giIy9yFNrKzYu9BvuFks99-P6NBP9RZfPQ;
        Expires=Fri, 06 Jun 2025 09:41:57 GMT; Max-Age=604800; Secure; Path=/; SameSite=Lax
      - 04f20c86f07421a9ec0f9d5ba4be544f=2be6ee371c495443f3e397921a30138e; path=/;
        HttpOnly; Secure; SameSite=None
      strict-transport-security:
      - max-age=31556926; includeSubDomains
      - max-age=15768000
      x-content-type-options:
      - nosniff
      x-frame-options:
      - sameorigin
      x-ratelimit-limit:
      - '133'
      x-ratelimit-remaining:
      - '129'
      x-ratelimit-reset:
      - '1748598176'
      x-request-id:
      - c7293b6197fced4d316ab47672493330
      x-xss-protection:
      - 1; mode=block
    status:
      code: 201
      message: CREATED
version: 1
